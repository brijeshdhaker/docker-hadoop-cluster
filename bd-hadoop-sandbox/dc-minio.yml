#
# docker volume create --name sandbox_apps_path --opt type=none --opt device=/apps --opt o=bind
#
---
version: '3.9'
services:
#
  minio:
    image: brijeshdhaker/minio:latest
    build:
      context: .
      dockerfile: docker-minio/minio/Dockerfile
    env_file:
      - docker-minio/minio.env
    ports:
      - "9000:9000"
      - "40000:40000"
    command: server /apps/hostpath/minio --console-address 0.0.0.0:40000
    volumes:
      - sandbox_apps_path:/apps
      - /apps/hostpath/minio/data:/data



#
  #
  minio-setup:
    image: brijeshdhaker/mc:latest
    build:
      context: .
      dockerfile: docker-minio/mc/Dockerfile
    depends_on:
      - minio
    container_name: minio-setup
    env_file:
      - docker-minio/minio.env
    entrypoint: /setup.sh

#
volumes:
  #
  sandbox_apps_path:
    external: true
  sandbox_security_secrets:
    external: true

#
networks:
  default:
    external: true
    driver: bridge
    name: sandbox.net
