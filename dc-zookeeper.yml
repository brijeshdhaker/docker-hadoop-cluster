#
#
# docker volume create --name sandbox_apps_path --opt type=none --opt device=/apps --opt o=bind
# docker volume create --name sandbox_zookeeper_371 --opt type=none --opt device=/apps/sandbox/zookeeper-3.7.1 --opt o=bind
#
#
---
version: '3.9'

services:
  #
  # Zookeeper Server
  #
  zookeeper:
    image: brijeshdhaker/zookeeper:3.7.1
    hostname: zookeeper.sandbox.net
    container_name: zookeeper
    ports:
      - "2181:2181"
    volumes:
      - sandbox_apps_path:/apps
      - sandbox_zookeeper_371:/zookeeper
      - ./conf/zookeeper:/opt/zookeeper/conf
      - ./conf/kerberos:/etc/kerberos
    environment:
      JVMFLAGS: "-Djava.security.auth.login.config=/opt/zookeeper/conf/jaas.conf -Djava.security.krb5.conf=/etc/kerberos/krb5.conf"
      KRB5_CONFIG: "/etc/kerberos/krb5.conf"

#
volumes:
  sandbox_apps_path:
    external: true
  sandbox_zookeeper_371:
    external: true
  sandbox_zookeeper_data:
    external: true
  sandbox_zookeeper_secrets:
    external: true
  sandbox_zookeeper_log:
    external: true

#
networks:
  default:
    external: true
    driver: bridge
    name: sandbox.net